<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--
        ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã«é–¢ã™ã‚‹æ¨å¥¨äº‹é …:
        1. ã‚¯ãƒªãƒƒã‚¯ã‚¸ãƒ£ãƒƒã‚­ãƒ³ã‚°å¯¾ç­–: ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã®HTTPãƒ˜ãƒƒãƒ€ãƒ¼ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚
           - X-Frame-Options: DENY (æ¨å¥¨: ä»–ã‚µã‚¤ãƒˆã‹ã‚‰ã®iframeåŸ‹ã‚è¾¼ã¿ã‚’å®Œå…¨ã«ç¦æ­¢)
           - X-Frame-Options: SAMEORIGIN (åŒä¸€ã‚ªãƒªã‚¸ãƒ³ã‹ã‚‰ã®åŸ‹ã‚è¾¼ã¿ã®ã¿è¨±å¯)
           - Content-Security-Policy: frame-ancestors 'self'; (æ¨å¥¨: ã‚ˆã‚ŠæŸ”è»Ÿãªåˆ¶å¾¡ãŒå¯èƒ½)
        2. HTTPSã®å¼·åˆ¶: æœ¬ç•ªç’°å¢ƒã§ã¯å¿…ãšHTTPSã‚’ä½¿ç”¨ã—ã€HTTPã‹ã‚‰HTTPSã¸ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚
           HSTS (HTTP Strict Transport Security) ãƒ˜ãƒƒãƒ€ãƒ¼ã®åˆ©ç”¨ã‚‚æ¤œè¨ã—ã¦ãã ã•ã„ã€‚
    -->
    <title>ãƒ©ãƒƒã‚­ãƒ¼ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ - é‹è©¦ã—ã‚’ã—ã‚ˆã†ï¼</title>
    <style>
        /* ===== åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ« ===== */
        :root {
            --primary-color: #ff3e3e;
            --secondary-color: #2c3e50;
            --accent-color: #f1c40f;
            --text-light: #ecf0f1;
            --text-dark: #2c3e50;
            --background-light: #ffffff;
            --background-dark: #1a1a1a;
            --success-color: #2ecc71;
            --nav-height: 60px;
            /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³é«˜ã•ã‚’å¤‰æ•°åŒ– */
            --transition-default: 0.3s ease;
            /* å…±é€šãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        html {
            /* ã‚¹ãƒ ãƒ¼ã‚¹ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’CSSã§å®Ÿç¾ */
            scroll-padding-top: var(--nav-height);
            /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å…ˆã®ä½ç½®èª¿æ•´ */
            scroll-behavior: smooth;
        }

        body {
            background-color: var(--background-light);
            color: var(--text-dark);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
            /* ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆæ™‚ã®ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ */
        }

        /* --- ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚¯ãƒ©ã‚¹ --- */
        .hidden {
            display: none;
            /* JSã§è¡¨ç¤º/éè¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ãŸã‚ã®ã‚¯ãƒ©ã‚¹ */
        }

        /* ===== ãƒ˜ãƒƒãƒ€ãƒ¼ ===== */
        header {
            background: linear-gradient(135deg, var(--primary-color), #ff7675);
            color: white;
            padding: 1rem;
            text-align: center;
            position: relative;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .logo {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .tagline {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        /* ===== ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ ===== */
        nav {
            background-color: var(--secondary-color);
            padding: 0 1rem;
            /* å·¦å³ã®padding */
            height: var(--nav-height);
            /* é«˜ã•ã‚’å¤‰æ•°ã§æŒ‡å®š */
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ™‚ã«è¿½å¾“ */
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .nav-links {
            display: flex;
            gap: 1.5rem;
        }

        .nav-links a {
            color: var(--text-light);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
            line-height: var(--nav-height);
            /* ãƒªãƒ³ã‚¯ã‚’å‚ç›´ä¸­å¤®æƒãˆ */
            padding: 0 0.5rem;
            /* ãƒ›ãƒãƒ¼ã‚¨ãƒªã‚¢èª¿æ•´ */
        }

        .nav-links a:hover,
        .nav-links a:focus {
            /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¹ã‚¿ã‚¤ãƒ«è¿½åŠ  */
            color: var(--accent-color);
            outline: none;
            /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ã‚’æ¶ˆã™å ´åˆ */
            text-decoration: underline;
            /* ä»£ã‚ã‚Šã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹è¡¨ç¤º */
        }

        .theme-toggle {
            background: none;
            border: none;
            color: var(--text-light);
            cursor: pointer;
            font-size: 1.5rem;
            /* ã‚µã‚¤ã‚ºèª¿æ•´ */
            padding: 0.5rem;
            /* ã‚¯ãƒªãƒƒã‚¯ã‚¨ãƒªã‚¢ç¢ºä¿ */
            border-radius: 50%;
            /* ä¸¸ãã™ã‚‹ */
            transition: background-color 0.2s;
        }

        .theme-toggle:hover,
        .theme-toggle:focus {
            background-color: rgba(255, 255, 255, 0.1);
            /* ãƒ›ãƒãƒ¼/ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã®èƒŒæ™¯ */
            outline: 2px solid var(--accent-color);
            /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒªãƒ³ã‚° */
        }


        /* ===== ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ ===== */
        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        .hero {
            text-align: center;
            margin-bottom: 3rem;
            padding-top: 1rem;
            /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³åˆ†ã®ã‚¹ãƒšãƒ¼ã‚¹ */
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .hero p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        .cta-button {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 0.8rem 2rem;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.1rem;
            transition: transform var(--transition-default), background-color var(--transition-default), box-shadow var(--transition-default);
            box-shadow: 0 4px 8px rgba(255, 62, 62, 0.3);
            border: 2px solid transparent;
            /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¹ã‚¿ã‚¤ãƒ«ç”¨ */
        }

        .cta-button:hover {
            transform: translateY(-3px);
            background-color: #ff5252;
            box-shadow: 0 6px 12px rgba(255, 62, 62, 0.4);
        }

        .cta-button:focus {
            outline: none;
            border-color: var(--accent-color);
            /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒªãƒ³ã‚° */
            box-shadow: 0 0 0 3px rgba(241, 196, 15, 0.5);
            /* å¤–å´ã®å½± */
        }

        /* ===== ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ ===== */
        .roulette-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 3rem;
            padding-top: 1rem;
            /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³åˆ†ã®ã‚¹ãƒšãƒ¼ã‚¹ */
        }

        .roulette-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 2rem auto;
        }

        .roulette-wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 5px solid var(--secondary-color);
            /* å¢ƒç•Œç·šã‚’è¿½åŠ  */
            background: conic-gradient(from 0deg,
                    var(--primary-color) 0deg 45deg,
                    var(--accent-color) 45deg 90deg,
                    var(--success-color) 90deg 135deg,
                    #3498db 135deg 180deg,
                    #9b59b6 180deg 225deg,
                    #1abc9c 225deg 270deg,
                    #e67e22 270deg 315deg,
                    #e74c3c 315deg 360deg);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            transform: rotate(0deg);
            /* åˆæœŸè§’åº¦ */
            transition: transform 0s linear;
            /* JSã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã«åˆæœŸtransitionã‚’ç„¡åŠ¹åŒ– */
        }

        /* ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚¢ã‚¯ã‚»ãƒ©ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ (å¿…è¦ãªå ´åˆã®ã¿) */
        .roulette-wheel,
        .testimonial-container {
            transform: translateZ(0);
            /* will-change: transform; */
            /* éå‰°ãªwill-changeã¯é¿ã‘ã‚‹ */
        }


        /* çµµæŸ„ã‚’é…ç½®ã™ã‚‹ãŸã‚ã®ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆJavaScriptã§å‹•çš„ã«è¿½åŠ ï¼‰ */
        .segment-label {
            position: absolute;
            top: 50%;
            left: 50%;
            font-size: 1.6rem;
            color: white;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
            pointer-events: none;
            background: rgba(0, 0, 0, 0.15);
            padding: 3px 6px;
            border-radius: 5px;
            user-select: none;
        }

        .roulette-center {
            position: absolute;
            width: 60px;
            height: 60px;
            background-color: var(--background-light);
            border: 3px solid var(--secondary-color);
            border-radius: 50%;
            z-index: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2);
        }

        .roulette-pointer {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 50px;
            background-color: var(--secondary-color);
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            z-index: 2;
            filter: drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.4));
        }

        .controls {
            margin-top: 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            width: 100%;
            max-width: 400px;
        }

        .image-options {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            width: 100%;
            margin-bottom: 1rem;
        }

        /* divã‹ã‚‰buttonã«å¤‰æ›´ */
        .image-option {
            width: 100%;
            aspect-ratio: 1;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            border: 3px solid transparent;
            transition: transform 0.2s, border-color 0.2s, background-color 0.2s;
            background-color: #f5f5f5;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.8rem;
            /* å°‘ã—å¤§ãã */
            color: var(--text-dark);
            /* ãƒ†ã‚­ã‚¹ãƒˆè‰²æŒ‡å®š */
            padding: 0;
            /* buttonãƒ‡ãƒ•ã‚©ãƒ«ãƒˆpaddingå‰Šé™¤ */
            font-family: inherit;
            /* ãƒ•ã‚©ãƒ³ãƒˆç¶™æ‰¿ */
            -webkit-tap-highlight-color: transparent;
            /* ã‚¹ãƒãƒ›ã§ã®ã‚¿ãƒƒãƒ—æ™‚ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’æ¶ˆã™ */
        }

        .image-option:hover,
        .image-option:focus {
            /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¹ã‚¿ã‚¤ãƒ«è¿½åŠ  */
            transform: scale(1.05);
            outline: 2px solid var(--accent-color);
            /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ */
            outline-offset: 2px;
        }

        .image-option.selected {
            border-color: var(--primary-color);
            background-color: #ffeaea;
            /* é¸æŠæ™‚ã®èƒŒæ™¯è‰² */
            transform: scale(1.05);
            outline: none;
            /* é¸æŠæ™‚ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ä¸è¦ */
        }

        /* é¸æŠã•ã‚Œã¦ã„ã‚‹ãƒœã‚¿ãƒ³ã® aria-checked å±æ€§ã‚’è€ƒæ…® */
        .image-option[aria-checked="true"] {
            /* radioãªã®ã§aria-pressedã§ã¯ãªãaria-checked */
            border-color: var(--primary-color);
            background-color: #ffeaea;
        }

        .spin-button {
            background-color: var(--primary-color);
            color: white;
            width: 100%;
            padding: 1rem;
            border: none;
            border-radius: 8px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s, opacity 0.3s;
        }

        .spin-button:hover:not(:disabled) {
            transform: scale(1.02);
            background-color: #ff5252;
        }

        .spin-button:focus:not(:disabled) {
            outline: 2px solid var(--accent-color);
            outline-offset: 2px;
        }

        .spin-button:disabled {
            background-color: #ccc;
            color: #666;
            /* Disabledæ™‚ã®æ–‡å­—è‰² */
            cursor: not-allowed;
            transform: none;
            opacity: 0.7;
        }

        .result {
            margin-top: 1.5rem;
            padding: 1.5rem;
            /* å°‘ã—åºƒã‚ã« */
            border-radius: 8px;
            background-color: #f0f0f0;
            text-align: center;
            min-height: 80px;
            /* å°‘ã—é«˜ã */
            width: 100%;
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px);
            /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ  */
            transition: opacity 0.5s ease-out, visibility 0s linear 0.5s, transform 0.5s ease-out;
            /* visibilityã®transitionå¤‰æ›´ */
            border: 1px solid #ddd;
        }

        .result.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
            transition-delay: 0s;
            /* è¡¨ç¤ºæ™‚ã¯é…å»¶ãªã— */
        }

        .result h3 {
            margin-bottom: 0.5rem;
            color: var(--secondary-color);
            font-size: 1.4rem;
            /* çµæœã‚’å¤§ãã */
        }

        .result p {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            /* æ®µè½é–“ã®ã‚¹ãƒšãƒ¼ã‚¹ */
        }

        .result .win {
            color: var(--success-color);
            font-weight: bold;
            font-size: 1.2rem;
            /* å½“é¸ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å¼·èª¿ */
        }

        .result .lose {
            color: var(--primary-color);
        }

        /* ===== ç‰¹å¾´ã‚»ã‚¯ã‚·ãƒ§ãƒ³ ===== */
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            /* minmaxèª¿æ•´ */
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .feature-card {
            background-color: #f9f9f9;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease-out, box-shadow 0.3s ease-out, opacity 0.6s ease-out;
            opacity: 0;
            /* Intersection Observerç”¨ åˆæœŸçŠ¶æ…‹ */
            transform: translateY(20px);
            /* Intersection Observerç”¨ åˆæœŸçŠ¶æ…‹ */
        }

        .feature-card.visible {
            /* Intersection Observerç”¨ è¡¨ç¤ºçŠ¶æ…‹ */
            opacity: 1;
            transform: translateY(0);
        }

        .feature-card:hover {
            transform: translateY(-5px) scale(1.02);
            /* Yæ–¹å‘ã¨ã‚¹ã‚±ãƒ¼ãƒ«ã‚’è¿½åŠ  */
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }

        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .feature-card h3 {
            margin-bottom: 1rem;
            color: var(--secondary-color);
        }

        /* ===== ãƒ†ã‚¹ãƒ†ã‚£ãƒ¢ãƒ‹ã‚¢ãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ ===== */
        .testimonials {
            margin-bottom: 3rem;
            padding-top: 1rem;
            /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³åˆ†ã®ã‚¹ãƒšãƒ¼ã‚¹ */
        }

        .testimonials h2 {
            text-align: center;
            margin-bottom: 2rem;
            color: var(--secondary-color);
        }

        .testimonial-slider {
            position: relative;
            max-width: 800px;
            margin: 0 auto;
            overflow: hidden;
            border-radius: 10px;
            /* Sliderå…¨ä½“ã«è§’ä¸¸ */
            background-color: #f9f9f9;
            /* èƒŒæ™¯è‰²çµ±ä¸€ */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .testimonial-container {
            display: flex;
            /* JSã§transitionã‚’è¨­å®šã™ã‚‹ãŸã‚CSSã‹ã‚‰ã¯å‰Šé™¤ */
            /* transition: transform 0.5s ease; */
        }

        .testimonial {
            min-width: 100%;
            padding: 2.5rem;
            /* Paddingèª¿æ•´ */
            flex-shrink: 0;
            /* ã‚¹ãƒ©ã‚¤ãƒ‰æ™‚ã«ç¸®ã¾ãªã„ã‚ˆã†ã« */
            opacity: 0;
            /* Intersection Observerç”¨ */
            transform: translateY(20px);
            /* Intersection Observerç”¨ */
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }

        .testimonial.visible {
            /* Intersection Observerç”¨ */
            opacity: 1;
            transform: translateY(0);
        }

        .testimonial-content {
            margin-bottom: 1.5rem;
            font-style: italic;
            font-size: 1.1rem;
            /* å°‘ã—å¤§ãã */
            position: relative;
        }

        .testimonial-content::before {
            /* å¼•ç”¨ç¬¦ */
            content: 'â€œ';
            font-size: 3rem;
            /* å¤§ãã */
            color: var(--primary-color);
            opacity: 0.3;
            /* å°‘ã—è–„ã */
            position: absolute;
            top: -0.5rem;
            left: -1rem;
        }

        .testimonial-author {
            font-weight: bold;
            color: var(--primary-color);
            text-align: right;
            /* å³å¯„ã› */
        }

        .testimonial-author::before {
            content: 'â€” ';
        }

        .slider-controls {
            display: flex;
            justify-content: center;
            margin-top: 1.5rem;
            padding-bottom: 1.5rem;
            /* ä¸‹éƒ¨ã«ã‚¹ãƒšãƒ¼ã‚¹ */
            gap: 1rem;
        }

        .slider-btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            width: 45px;
            /* å°‘ã—å¤§ãã */
            height: 45px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            font-size: 1.2rem;
            /* ã‚¢ã‚¤ã‚³ãƒ³ã‚µã‚¤ã‚ºèª¿æ•´ */
        }

        .slider-btn:hover:not(:disabled) {
            background-color: var(--primary-color);
            transform: scale(1.1);
        }

        .slider-btn:focus {
            outline: 2px solid var(--accent-color);
            /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¹ã‚¿ã‚¤ãƒ« */
            outline-offset: 2px;
        }

        .slider-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* ===== FAQ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ ===== */
        .faq {
            margin-bottom: 3rem;
            padding-top: 1rem;
            /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³åˆ†ã®ã‚¹ãƒšãƒ¼ã‚¹ */
        }

        .faq h2 {
            text-align: center;
            margin-bottom: 2rem;
            color: var(--secondary-color);
        }

        .accordion {
            list-style: none;
            max-width: 800px;
            margin: 0 auto;
        }

        .accordion-item {
            margin-bottom: 1rem;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            background-color: #f9f9f9;
            /* èƒŒæ™¯è‰²ã‚’è¿½åŠ  */
            opacity: 0;
            /* Intersection Observerç”¨ */
            transform: translateY(20px);
            /* Intersection Observerç”¨ */
            transition: opacity 0.6s ease-out, transform 0.6s ease-out, background-color 0.3s;
        }

        .accordion-item.visible {
            /* Intersection Observerç”¨ */
            opacity: 1;
            transform: translateY(0);
        }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’buttonã«å¤‰æ›´ */
        .accordion-header {
            background-color: transparent;
            /* Itemå´ã§æŒ‡å®šã™ã‚‹ãŸã‚é€æ˜ã« */
            padding: 1.2rem 1.5rem;
            /* Paddingèª¿æ•´ */
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: background-color 0.3s;
            border: none;
            /* buttonè¦ç´ ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆborderã‚’å‰Šé™¤ */
            width: 100%;
            /* buttonè¦ç´ ã®å¹…ã‚’100%ã« */
            text-align: left;
            /* buttonè¦ç´ ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å·¦æƒãˆã« */
            font-size: 1.1rem;
            /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºèª¿æ•´ */
            font-weight: 500;
            /* ãƒ•ã‚©ãƒ³ãƒˆã‚¦ã‚§ã‚¤ãƒˆèª¿æ•´ */
            color: var(--text-dark);
            /* ãƒ†ã‚­ã‚¹ãƒˆã‚«ãƒ©ãƒ¼ */
        }

        .accordion-header:hover,
        .accordion-header:focus {
            background-color: #ebebeb;
            outline: none;
            /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã¯è¦ªè¦ç´ ã§ç®¡ç† */
        }

        /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’itemã«é©ç”¨ */
        .accordion-item:focus-within {
            outline: 2px solid var(--accent-color);
            outline-offset: 2px;
        }


        .accordion-content {
            background-color: white;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out, padding 0.4s ease-out;
            /* paddingã‚‚ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³å¯¾è±¡ã« */
            padding: 0 1.5rem;
            /* é–‹é–‰ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä¸­ã®æ¨ªpadding */
            visibility: hidden;
            /* é–‰ã˜ãŸçŠ¶æ…‹ã§éè¡¨ç¤º */
        }

        .accordion-content-inner {
            padding: 0;
            /* åˆæœŸçŠ¶æ…‹ã§ã¯paddingãªã— */
            border-top: 1px solid #eee;
            /* åŒºåˆ‡ã‚Šç·š */
            transition: padding 0.4s ease-out;
            /* innerã®paddingã‚‚ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ */
        }

        .accordion-item.active .accordion-header {
            background-color: var(--secondary-color);
            color: white;
        }

        .accordion-item.active .accordion-header:hover {
            background-color: var(--secondary-color);
            /* ã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ™‚ã¯ãƒ›ãƒãƒ¼è‰²ã‚’å¤‰ãˆãªã„ */
        }

        .accordion-item.active .accordion-header .accordion-icon {
            transform: rotate(45deg);
            /* ã‚¢ã‚¤ã‚³ãƒ³ã‚’å›è»¢ */
        }

        .accordion-item.active .accordion-content {
            max-height: 400px;
            /* ååˆ†ãªé«˜ã•ã‚’ç¢ºä¿ (å¿…è¦ãªã‚‰JSã§å‹•çš„ã«èª¿æ•´) */
            visibility: visible;
            /* é–‹ã„ãŸçŠ¶æ…‹ã§è¡¨ç¤º */
            padding: 0 1.5rem;
            /* æ¨ªpaddingã¯ç¶­æŒ */
        }

        /* é–‹ã„ãŸçŠ¶æ…‹ã®å†…éƒ¨ãƒ‘ãƒ‡ã‚£ãƒ³ã‚° */
        .accordion-item.active .accordion-content-inner {
            padding: 1.5rem 0;
            /* ä¸Šä¸‹ã®paddingã‚’è¨­å®š */
        }

        .accordion-icon {
            font-size: 1.5rem;
            font-weight: bold;
            transition: transform 0.3s ease-out;
            /* ã‚¢ã‚¤ã‚³ãƒ³ã®å›è»¢ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
            flex-shrink: 0;
            /* ã‚¢ã‚¤ã‚³ãƒ³ãŒç¸®ã¾ãªã„ã‚ˆã†ã« */
            margin-left: 1rem;
            /* ãƒ†ã‚­ã‚¹ãƒˆã¨ã®é–“éš” */
        }


        /* ===== CTA ã‚»ã‚¯ã‚·ãƒ§ãƒ³ ===== */
        .cta-section {
            text-align: center;
            padding: 3rem;
            background-color: #f0f0f0;
            border-radius: 10px;
            margin-bottom: 3rem;
            opacity: 0;
            /* Intersection Observerç”¨ */
            transform: translateY(20px);
            /* Intersection Observerç”¨ */
            transition: opacity 0.6s ease-out, transform 0.6s ease-out, background-color 0.3s;
        }

        .cta-section.visible {
            /* Intersection Observerç”¨ */
            opacity: 1;
            transform: translateY(0);
        }


        .cta-section h2 {
            margin-bottom: 1.5rem;
            color: var(--secondary-color);
            font-size: 1.8rem;
            /* å°‘ã—å¤§ãã */
        }

        .cta-section p {
            margin-bottom: 2rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        /* ===== Admin Panel ===== */
        .admin-panel {
            margin: 3rem auto;
            padding: 2rem;
            max-width: 800px;
            background-color: #eee;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: opacity 0.3s ease, transform 0.3s ease;
            /* è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ */
            opacity: 1;
            transform: translateY(0);
        }

        .admin-panel.hidden {
            opacity: 0;
            transform: translateY(-10px);
            pointer-events: none;
            /* éè¡¨ç¤ºæ™‚ã¯æ“ä½œä¸å¯ã« */
            /* display: none ã¯ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã¨ç«¶åˆã™ã‚‹ãŸã‚ã€opacityã¨transformã§åˆ¶å¾¡ */
            /* å¿…è¦ãªã‚‰ height: 0; overflow: hidden; ã‚‚è¿½åŠ  */
        }

        .admin-panel h2 {
            text-align: center;
            margin-bottom: 2rem;
            color: var(--secondary-color);
        }

        .weight-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .weight-control {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            background: #fff;
            padding: 1rem;
            border-radius: 6px;
        }

        .weight-control label {
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .weight-control input[type="number"] {
            padding: 0.5rem;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 60px;
            /* å¹…ã‚’å›ºå®š */
            text-align: right;
        }

        .probability {
            font-size: 0.9rem;
            color: #555;
            margin-left: auto;
            /* å³å¯„ã› */
            padding-left: 10px;
            /* å·¦ã®ã‚¹ãƒšãƒ¼ã‚¹ */
        }

        .admin-panel .admin-button {
            background-color: var(--primary-color);
            color: white;
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-right: 1rem;
            margin-bottom: 0.5rem;
            /* ãƒœã‚¿ãƒ³é–“ã®ã‚¹ãƒšãƒ¼ã‚¹ */
        }

        .admin-panel .admin-button:hover:not(:disabled) {
            /* :disabled ã‚’è¿½åŠ  */
            background-color: #ff5252;
        }

        .admin-panel .admin-button#reset-weights {
            background-color: var(--secondary-color);
        }

        .admin-panel .admin-button#reset-weights:hover:not(:disabled) {
            /* :disabled ã‚’è¿½åŠ  */
            background-color: #34495e;
        }

        .admin-panel .admin-button:disabled {
            /* disabled ã‚¹ã‚¿ã‚¤ãƒ«è¿½åŠ  */
            background-color: #ccc;
            cursor: not-allowed;
            opacity: 0.7;
        }

        .admin-panel .security-warning {
            /* ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è­¦å‘Šç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ« */
            font-size: 0.9rem;
            color: #777;
            margin-top: 1rem;
            padding: 0.8rem;
            background-color: #fff;
            border: 1px dashed #aaa;
            border-radius: 4px;
        }

        .admin-panel .security-warning strong {
            color: var(--primary-color);
        }


        /* ===== ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ ===== */
        @media (max-width: 768px) {
            :root {
                --nav-height: 50px;
                /* ãƒ¢ãƒã‚¤ãƒ«ã§ã®ãƒŠãƒ“é«˜ã•ã‚’èª¿æ•´ */
            }

            .nav-links {
                /* ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼æœªå®Ÿè£…ã®ãŸã‚éè¡¨ç¤ºã®ã¾ã¾ (å¿…è¦ãªã‚‰å®Ÿè£…) */
                display: none;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .hero p {
                font-size: 1rem;
            }

            .roulette-container {
                width: clamp(220px, 80vw, 280px);
                /* ã‚µã‚¤ã‚ºã‚’ç”»é¢å¹…ã«å¿œã˜ã¦èª¿æ•´ */
                height: clamp(220px, 80vw, 280px);
            }

            .roulette-pointer {
                top: -20px;
                width: 25px;
                height: 40px;
            }

            .segment-label {
                font-size: 1.3rem;
                /* ãƒ¢ãƒã‚¤ãƒ«ã§ã¯å°‘ã—å°ã•ã */
                padding: 2px 4px;
            }


            .feature-card {
                padding: 1.5rem;
            }

            .image-options {
                grid-template-columns: repeat(4, 1fr);
                /* 4åˆ—ã®ã¾ã¾ */
                gap: 8px;
            }

            .image-option {
                font-size: 1.5rem;
            }

            .testimonial {
                padding: 2rem 1.5rem;
                /* å·¦å³ã®paddingã‚’å°‘ã—ç‹­ã */
            }

            .testimonial-content::before {
                /* å¼•ç”¨ç¬¦ã®ä½ç½®èª¿æ•´ */
                left: -0.5rem;
            }

            .accordion-header {
                padding: 1rem 1.2rem;
                font-size: 1rem;
            }

            .accordion-item.active .accordion-content-inner {
                padding: 1rem 0;
            }

            .weight-controls {
                grid-template-columns: 1fr;
                /* ãƒ¢ãƒã‚¤ãƒ«ã§ã¯1åˆ— */
            }
        }

        /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .dark-mode {
            --background-light: var(--background-dark);
            --text-dark: var(--text-light);
            --secondary-color-dark: #34495e;
            /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ç”¨ã®ä¸­é–“è‰² */
            --background-medium-dark: #2d3436;
            /* ã‚«ãƒ¼ãƒ‰ãªã©ã®èƒŒæ™¯ */
            --border-dark: #4b6177;
            /* ãƒœãƒ¼ãƒ€ãƒ¼è‰² */
        }

        .dark-mode body {
            background-color: var(--background-dark);
            color: var(--text-light);
        }

        /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã§ã®èƒŒæ™¯è‰²èª¿æ•´ */
        .dark-mode .feature-card,
        .dark-mode .accordion-item,
        .dark-mode .testimonial-slider,
        .dark-mode .result,
        .dark-mode .cta-section,
        .dark-mode .image-option {
            background-color: var(--background-medium-dark);
            color: var(--text-light);
            border-color: var(--border-dark);
            /* ãƒœãƒ¼ãƒ€ãƒ¼è‰²èª¿æ•´ */
        }

        .dark-mode .image-option.selected,
        .dark-mode .image-option[aria-checked="true"] {
            background-color: #4a3030;
            /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰é¸æŠæ™‚ */
            border-color: var(--primary-color);
        }

        .dark-mode .accordion-header {
            background-color: transparent;
            /* itemå´ã§æŒ‡å®š */
            color: var(--text-light);
        }

        .dark-mode .accordion-header:hover,
        .dark-mode .accordion-header:focus {
            background-color: #4a5a6a;
        }

        .dark-mode .accordion-item.active .accordion-header {
            background-color: var(--primary-color);
            /* ã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ™‚ã®è‰²ã‚’æ˜ã‚‹ã */
            color: white;
        }

        .dark-mode .accordion-item.active .accordion-header:hover {
            background-color: var(--primary-color);
        }

        .dark-mode .accordion-content {
            background-color: var(--secondary-color-dark);
            /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„èƒŒæ™¯ã‚’å°‘ã—æ˜ã‚‹ã */
            color: var(--text-light);
        }

        .dark-mode .accordion-content-inner {
            border-top-color: var(--border-dark);
        }

        .dark-mode .roulette-center {
            background-color: var(--background-medium-dark);
            border-color: #7f8c8d;
        }

        .dark-mode .roulette-wheel {
            border-color: #7f8c8d;
        }

        /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¯ç¾çŠ¶ç¶­æŒ */

        .dark-mode .result {
            border-color: var(--border-dark);
        }

        .dark-mode .cta-section {
            background-color: var(--background-medium-dark);
        }

        .dark-mode .nav-links a:hover,
        .dark-mode .nav-links a:focus {
            color: var(--accent-color);
        }

        .dark-mode .slider-btn {
            background-color: #4a5a6a;
        }

        .dark-mode .slider-btn:hover:not(:disabled) {
            background-color: var(--primary-color);
        }

        .dark-mode .admin-panel {
            background-color: var(--secondary-color-dark);
            border-color: var(--border-dark);
        }

        .dark-mode .weight-control {
            background-color: var(--background-medium-dark);
            border-color: var(--border-dark);
        }

        .dark-mode .weight-control input[type="number"] {
            background-color: var(--background-dark);
            color: var(--text-light);
            border-color: var(--border-dark);
        }

        .dark-mode .probability {
            color: var(--text-light);
            opacity: 0.8;
        }

        .dark-mode .admin-panel .security-warning {
            background-color: var(--background-medium-dark);
            border-color: #666;
            color: var(--text-light);
        }

        .dark-mode .admin-panel .security-warning strong {
            color: #ff7675;
            /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã§ã®å¼·èª¿è‰² */
        }


        /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ */
        .dark-mode::-webkit-scrollbar {
            width: 10px;
        }

        .dark-mode::-webkit-scrollbar-track {
            background: var(--secondary-color);
        }

        .dark-mode::-webkit-scrollbar-thumb {
            background: #566573;
            border-radius: 5px;
        }

        .dark-mode::-webkit-scrollbar-thumb:hover {
            background: #7f8c8d;
        }
    </style>
</head>

<body>
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header>
        <div class="logo">ğŸ² ãƒ©ãƒƒã‚­ãƒ¼ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ</div>
        <div class="tagline">é‹å‘½ã®è¼ªã‚’å›ã—ã¦ã€å¹¸é‹ã‚’ã¤ã‹ã¿å–ã‚ã†ï¼</div>
    </header>

    <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
    <nav>
        <div class="nav-links">
            <a href="#home">ãƒ›ãƒ¼ãƒ </a>
            <a href="#play-now">ãƒ—ãƒ¬ã‚¤</a>
            <a href="#about">ç‰¹å¾´</a>
            <a href="#faq">FAQ</a>
            <a href="#testimonials">ãŠå®¢æ§˜ã®å£°</a>
            <!-- Admin Panel Toggle Link: roleã¨aria-expandedã‚’è¿½åŠ  -->
            <a href="#admin-panel-link" id="admin-panel-toggle-link" role="button" aria-expanded="false">ç®¡ç†</a>
        </div>
        <div><!-- å³å¯„ã›ã®ãŸã‚ã®ã‚³ãƒ³ãƒ†ãƒŠ -->
            <button class="theme-toggle" id="theme-toggle" aria-label="ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ">ğŸŒ™</button>
            <!-- ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ (æœªå®Ÿè£…) -->
            <!-- <button class="mobile-menu-btn" aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã" aria-expanded="false">â˜°</button> -->
        </div>
    </nav>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <main>
        <!-- ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="hero" id="home">
            <h1>é‹å‘½ã®ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã§ã‚ãªãŸã®é‹è©¦ã—</h1>
            <p>ãƒ©ãƒƒã‚­ãƒ¼ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã§ã¯ã€ã‚ãªãŸã®é‹å‹¢ã‚’è©¦ã™æ©Ÿä¼šã‚’æä¾›ã—ã¾ã™ã€‚ãƒ›ã‚¤ãƒ¼ãƒ«ã‚’å›ã—ã¦ã€æ§˜ã€…ãªè³å“ã‚„ç‰¹å…¸ã‚’ã‚²ãƒƒãƒˆã—ã¾ã—ã‚‡ã†ï¼ä»Šã™ãå‚åŠ ã—ã¦ã€ã‚ãªãŸã®å¹¸é‹ã‚’ç¢ºã‹ã‚ã‚ˆã†ã€‚</p>
            <a href="#play-now" class="cta-button">ä»Šã™ããƒ—ãƒ¬ã‚¤</a>
        </section>

        <!-- ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="roulette-section" id="play-now">
            <h2>ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚’å›ãã†</h2>
            <div class="roulette-container">
                <div class="roulette-wheel" id="roulette-wheel">
                    <!-- çµµæŸ„ãƒ©ãƒ™ãƒ«ã¯JSã§å‹•çš„ã«è¿½åŠ  -->
                    <div class="roulette-center"></div>
                </div>
                <div class="roulette-pointer"></div>
            </div>
            <div class="controls">
                <p id="select-prompt">å¥½ããªçµµæŸ„ã‚’é¸ã‚“ã§ãã ã•ã„ (8ç¨®é¡)</p>
                <div class="image-options" id="image-options" role="radiogroup" aria-labelledby="select-prompt">
                    <!-- ãƒœã‚¿ãƒ³ã«å¤‰æ›´ã—ã€role="radio", aria-checked, aria-labelã‚’è¿½åŠ  -->
                    <button class="image-option" role="radio" aria-checked="false" data-value="0"
                        aria-label="ãƒã‚§ãƒªãƒ¼ã‚’é¸æŠ">ğŸ’</button>
                    <button class="image-option" role="radio" aria-checked="false" data-value="1"
                        aria-label="ãƒ¬ãƒ¢ãƒ³ã‚’é¸æŠ">ğŸ‹</button>
                    <button class="image-option" role="radio" aria-checked="false" data-value="2"
                        aria-label="ã‚ªãƒ¬ãƒ³ã‚¸ã‚’é¸æŠ">ğŸŠ</button>
                    <button class="image-option" role="radio" aria-checked="false" data-value="3"
                        aria-label="ã¶ã©ã†ã‚’é¸æŠ">ğŸ‡</button>
                    <button class="image-option" role="radio" aria-checked="false" data-value="4"
                        aria-label="ãƒªãƒ³ã‚´ã‚’é¸æŠ">ğŸ</button>
                    <button class="image-option" role="radio" aria-checked="false" data-value="5"
                        aria-label="ã‚¹ã‚¤ã‚«ã‚’é¸æŠ">ğŸ‰</button>
                    <button class="image-option" role="radio" aria-checked="false" data-value="6"
                        aria-label="ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ã‚’é¸æŠ">ğŸ’</button>
                    <button class="image-option" role="radio" aria-checked="false" data-value="7"
                        aria-label="æ˜Ÿã‚’é¸æŠ">ğŸŒŸ</button>
                </div>
                <button id="spin-button" class="spin-button" disabled>ã‚¹ãƒ”ãƒ³ï¼</button>
                <div class="result" id="result" aria-live="polite"></div> <!-- aria-liveè¿½åŠ  -->
            </div>
        </section>

        <!-- ç‰¹å¾´ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="features" id="about">
            <!-- Intersection Observerã®ãŸã‚ã«å„è¦ç´ ã« target ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ  -->
            <div class="feature-card target">
                <div class="feature-icon">ğŸ¯</div>
                <h3>ã‚·ãƒ³ãƒ—ãƒ«ãªæ“ä½œ</h3>
                <p>8ç¨®é¡ã®çµµæŸ„ã‹ã‚‰å¥½ããªã‚‚ã®ã‚’é¸ã³ã€ã‚¹ãƒ”ãƒ³ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã ã‘ã€‚ç›´æ„Ÿçš„ãªæ“ä½œã§ã©ãªãŸã§ã‚‚ç°¡å˜ã«æ¥½ã—ã‚ã¾ã™ã€‚</p>
            </div>
            <div class="feature-card target">
                <div class="feature-icon">ğŸ†</div>
                <h3>è±ªè¯è³å“</h3>
                <p>å½“é¸è€…ã«ã¯ã€è±ªè¯ãªè³å“ã‚’ã”ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚é‹ãŒè‰¯ã‘ã‚Œã°ã€ç´ æ™´ã‚‰ã—ã„è³å“ã‚’ã‚²ãƒƒãƒˆã§ãã‚‹ãƒãƒ£ãƒ³ã‚¹ãŒã‚ã‚Šã¾ã™ã€‚ï¼ˆâ€»å½“ãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸ã§ã¯å®Ÿéš›ã®è³å“æä¾›ã¯ã‚ã‚Šã¾ã›ã‚“ï¼‰</p>
            </div>
            <div class="feature-card target">
                <div class="feature-icon">ğŸ”„</div>
                <h3>ä½•åº¦ã§ã‚‚æŒ‘æˆ¦å¯èƒ½</h3>
                <p>ä¸€åº¦ã®æŒ‘æˆ¦ã§é‹ãŒæ‚ªãã¦ã‚‚å¤§ä¸ˆå¤«ã€‚ä½•åº¦ã§ã‚‚ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚’å›ã—ã¦ã€ã‚ãªãŸã®é‹å‹¢ã‚’è©¦ã™ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
            </div>
        </section>

        <!-- ãƒ†ã‚¹ãƒ†ã‚£ãƒ¢ãƒ‹ã‚¢ãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="testimonials" id="testimonials">
            <h2>ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®å£°</h2>
            <div class="testimonial-slider">
                <div class="testimonial-container" id="testimonial-container">
                    <!-- Intersection Observerã®ãŸã‚ã«å„è¦ç´ ã« target ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ  -->
                    <div class="testimonial target">
                        <div class="testimonial-content">
                            ã€Œåˆã‚ã¦ãƒ—ãƒ¬ã‚¤ã—ãŸã¨ãã¯åŠä¿¡åŠç–‘ã§ã—ãŸãŒã€ãªã‚“ã¨å¤§å½“ãŸã‚Šï¼æœ¬å½“ã«ç´ æ™´ã‚‰ã—ã„ä½“é¨“ã§ã—ãŸã€‚ã¾ãŸæŒ‘æˆ¦ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚ã€
                        </div>
                        <div class="testimonial-author">ç”°ä¸­ å¥å¤ª</div>
                    </div>
                    <div class="testimonial target">
                        <div class="testimonial-content">
                            ã€Œã“ã®ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚²ãƒ¼ãƒ ã®é¢ç™½ã•ã«ãƒãƒã£ã¦ã„ã¾ã™ã€‚ã‚·ãƒ³ãƒ—ãƒ«ãªã®ã«å¥¥ãŒæ·±ãã€æ¯å›ãƒ‰ã‚­ãƒ‰ã‚­ã—ã¾ã™ã€‚å‹é”ã«ã‚‚å‹§ã‚ã¾ã—ãŸï¼ã€
                        </div>
                        <div class="testimonial-author">ä½è—¤ ç¾å’²</div>
                    </div>
                    <div class="testimonial target">
                        <div class="testimonial-content">
                            ã€Œè³å“ã®è³ªãŒé«˜ãã€å½“ãŸã£ãŸæ™‚ã®å–œã³ã¯è¨€è‘‰ã§ã¯è¡¨ã›ã¾ã›ã‚“ã€‚ã‚µã‚¤ãƒˆã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚‚ä½¿ã„ã‚„ã™ãã€ã¨ã¦ã‚‚æº€è¶³ã—ã¦ã„ã¾ã™ã€‚ã€
                        </div>
                        <div class="testimonial-author">éˆ´æœ¨ å¤§è¼”</div>
                    </div>
                </div>
            </div>
            <div class="slider-controls">
                <!-- aria-labelè¿½åŠ  -->
                <button class="slider-btn prev-btn" id="prev-testimonial" aria-label="å‰ã® testimonials ã‚’è¡¨ç¤º">â—€</button>
                <button class="slider-btn next-btn" id="next-testimonial" aria-label="æ¬¡ã® testimonials ã‚’è¡¨ç¤º">â–¶</button>
            </div>
        </section>

        <!-- FAQã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="faq" id="faq">
            <h2>ã‚ˆãã‚ã‚‹è³ªå•</h2>
            <ul class="accordion" id="faq-accordion">
                <!-- Intersection Observerã®ãŸã‚ã«å„è¦ç´ ã« target ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ  -->
                <!-- å„ã‚¢ã‚¤ãƒ†ãƒ ã«IDã€ãƒ˜ãƒƒãƒ€ãƒ¼ãƒœã‚¿ãƒ³ã« aria-controls, aria-expandedã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã« role="region", aria-labelledby ã‚’è¿½åŠ  -->
                <li class="accordion-item target">
                    <button class="accordion-header" id="faq-header-1" aria-controls="faq-content-1"
                        aria-expanded="false">
                        <span>ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã®éŠã³æ–¹ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚</span>
                        <span class="accordion-icon" aria-hidden="true">+</span>
                    </button>
                    <div class="accordion-content" id="faq-content-1" role="region" aria-labelledby="faq-header-1">
                        <div class="accordion-content-inner">
                            ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã®éŠã³æ–¹ã¯ç°¡å˜ã§ã™ã€‚ä¸‹ã«ã‚ã‚‹8ç¨®é¡ã®çµµæŸ„ã‹ã‚‰å¥½ããªã‚‚ã®ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦é¸ã³ã¾ã™ã€‚æ¬¡ã«ã€Œã‚¹ãƒ”ãƒ³ï¼ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚’å›ã—ã¾ã™ã€‚ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆãŒåœæ­¢ã—ã€çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ã‚ãªãŸã®é¸ã‚“ã çµµæŸ„ã§åœæ­¢ã™ã‚Œã°å½“ãŸã‚Šã§ã™ã€‚
                        </div>
                    </div>
                </li>
                <li class="accordion-item target">
                    <button class="accordion-header" id="faq-header-2" aria-controls="faq-content-2"
                        aria-expanded="false">
                        <span>è³å“ã¯ã©ã®ã‚ˆã†ã«å—ã‘å–ã‚Œã¾ã™ã‹ï¼Ÿ</span>
                        <span class="accordion-icon" aria-hidden="true">+</span>
                    </button>
                    <div class="accordion-content" id="faq-content-2" role="region" aria-labelledby="faq-header-2">
                        <div class="accordion-content-inner">
                            è³å“ã®å—ã‘å–ã‚Šæ–¹æ³•ã¯å½“é¸æ™‚ã«ãƒ¡ãƒ¼ãƒ«ã§ã”æ¡ˆå†…ã—ã¾ã™ã€‚ãƒ‡ã‚¸ã‚¿ãƒ«è³å“ã®å ´åˆã¯ãƒ¡ãƒ¼ãƒ«ã§é€ä»˜ã•ã‚Œã€ç‰©ç†çš„ãªè³å“ã®å ´åˆã¯é…é€å…ˆä½æ‰€ã®ç¢ºèªå¾Œã«ç™ºé€ã•ã‚Œã¾ã™ã€‚å½“é¸å¾Œ7æ—¥ä»¥å†…ã«æ‰‹ç¶šãã‚’å®Œäº†ã—ã¦ãã ã•ã„ã€‚
                            (â€»å½“ãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸ã§ã¯å®Ÿéš›ã®è³å“æä¾›ã¯ã‚ã‚Šã¾ã›ã‚“)
                        </div>
                    </div>
                </li>
                <li class="accordion-item target">
                    <button class="accordion-header" id="faq-header-3" aria-controls="faq-content-3"
                        aria-expanded="false">
                        <span>ä½•å›ãƒ—ãƒ¬ã‚¤ã§ãã¾ã™ã‹ï¼Ÿ</span>
                        <span class="accordion-icon" aria-hidden="true">+</span>
                    </button>
                    <div class="accordion-content" id="faq-content-3" role="region" aria-labelledby="faq-header-3">
                        <div class="accordion-content-inner">
                            åŸºæœ¬çš„ã«ã¯ä½•å›ã§ã‚‚ãƒ—ãƒ¬ã‚¤ã„ãŸã ã‘ã¾ã™ã€‚ã‚¹ãƒ”ãƒ³ãŒçµ‚ã‚ã£ãŸã‚‰ã€ã¾ãŸå¥½ããªçµµæŸ„ã‚’é¸ã‚“ã§æŒ‘æˆ¦ã—ã¦ãã ã•ã„ã€‚ãŸã ã—ã€ç‰¹å®šã®ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³æœŸé–“ä¸­ã¯1æ—¥ã®å›æ•°åˆ¶é™ãŒè¨­ã‘ã‚‰ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚
                        </div>
                    </div>
                </li>
                <li class="accordion-item target">
                    <button class="accordion-header" id="faq-header-4" aria-controls="faq-content-4"
                        aria-expanded="false">
                        <span>å½“é¸ç¢ºç‡ã¯ã©ã®ãã‚‰ã„ã§ã™ã‹ï¼Ÿ</span>
                        <span class="accordion-icon" aria-hidden="true">+</span>
                    </button>
                    <div class="accordion-content" id="faq-content-4" role="region" aria-labelledby="faq-header-4">
                        <div class="accordion-content-inner">
                            ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆãŒå„çµµæŸ„ã§åœæ­¢ã™ã‚‹ç¢ºç‡ã¯ã€ç®¡ç†ãƒ‘ãƒãƒ«ã§è¨­å®šã•ã‚ŒãŸé‡ã¿ã«åŸºã¥ã„ã¦æ±ºå®šã•ã‚Œã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯å„çµµæŸ„ã®å½“é¸ç¢ºç‡ã¯ç­‰ã—ã 1/8 (12.5%)
                            ã§ã™ãŒã€è¨­å®šã«ã‚ˆã£ã¦å¤‰æ›´ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã‚ãªãŸã®é¸ã‚“ã çµµæŸ„ã§åœæ­¢ã™ã‚Œã°å½“ãŸã‚Šã¨ãªã‚Šã¾ã™ã€‚<br>
                            <strong>(é‡è¦:
                                ã“ã®ãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸ã§ã¯ã€ç¢ºç‡è¨ˆç®—ã¯ãƒ–ãƒ©ã‚¦ã‚¶å†…ã§è¡Œã‚ã‚Œã‚‹ãŸã‚ã€æŠ€è¡“çš„ãªçŸ¥è­˜ãŒã‚ã‚Œã°æ“ä½œå¯èƒ½ã§ã™ã€‚å®Ÿéš›ã®æŠ½é¸ã‚·ã‚¹ãƒ†ãƒ ã§ã¯ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ç¢ºç‡è¨ˆç®—ã‚’è¡Œã†ã¹ãã§ã™ã€‚)</strong>
                        </div>
                    </div>
                </li>
            </ul>
        </section>

        <!-- CTAã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="cta-section target" id="cta">
            <h2>ä»Šã™ãé‹å‘½ã®ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã«æŒ‘æˆ¦ã—ã‚ˆã†ï¼</h2>
            <p>é‹ãŒè‰¯ã‘ã‚Œã°ã€ç´ æ™´ã‚‰ã—ã„è³å“ãŒã‚²ãƒƒãƒˆã§ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ä»Šã™ããƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚’å›ã—ã¦ã€ã‚ãªãŸã®é‹å‹¢ã‚’è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼</p>
            <a href="#play-now" class="cta-button">ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚’å›ã™</a>
        </section>

        <!-- Admin Panel (æœ€åˆã¯éè¡¨ç¤º) -->
        <section class="admin-panel hidden" id="admin-panel" aria-labelledby="admin-panel-heading">
            <h2 id="admin-panel-heading">ç¢ºç‡è¨­å®šãƒ‘ãƒãƒ«</h2>
            <div class="weight-controls" id="weight-controls">
                <!-- Generated dynamically in JS -->
            </div>
            <button id="save-weights" class="admin-button">è¨­å®šã‚’ä¿å­˜</button>
            <button id="reset-weights" class="admin-button">ãƒªã‚»ãƒƒãƒˆ</button>
            <!-- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è­¦å‘Šã‚’è¿½åŠ  -->
            <p class="security-warning">
                <strong>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã«é–¢ã™ã‚‹æ³¨æ„:</strong>
                ã“ã®è¨­å®šã¯ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ã•ã‚Œã€æŠ½é¸ãƒ­ã‚¸ãƒƒã‚¯ã‚‚ãƒ–ãƒ©ã‚¦ã‚¶å†…ã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚
                ãã®ãŸã‚ã€æŠ€è¡“çš„ãªçŸ¥è­˜ãŒã‚ã‚Œã°ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã“ã‚Œã‚‰ã®è¨­å®šã‚„æŠ½é¸çµæœã‚’<strong>æ“ä½œå¯èƒ½</strong>ã§ã™ã€‚
                ã“ã‚Œã¯ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç›®çš„ã®æ©Ÿèƒ½ã§ã‚ã‚Šã€å®Ÿéš›ã®è³å“ãŒé–¢ã‚ã‚‹ã‚ˆã†ãªå…¬æ­£ãªæŠ½é¸ã«ã¯é©ã—ã¦ã„ã¾ã›ã‚“ã€‚
                æœ¬ç•ªç’°å¢ƒã§ã¯ã€<strong>å¿…ãšã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§æŠ½é¸ãƒ­ã‚¸ãƒƒã‚¯ã¨ç¢ºç‡è¨­å®šã‚’ç®¡ç†ã—ã¦ãã ã•ã„ã€‚</strong>
            </p>
        </section>
    </main>

    <!-- JavaScript -->
    <script>
        "use strict"; // Strictãƒ¢ãƒ¼ãƒ‰ã‚’æœ‰åŠ¹åŒ–

        // å³æ™‚å®Ÿè¡Œé–¢æ•°å¼ (IIFE) ã‚’ä½¿ç”¨ã—ã¦ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚³ãƒ¼ãƒ—ã®æ±šæŸ“ã‚’é˜²ã
        (() => {
            // --- å®šæ•°å®šç¾© ---
            const SPIN_DURATION_SECONDS = 4; // ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã®å›è»¢æ™‚é–“ï¼ˆç§’ï¼‰
            const BASE_ROTATION_DEGREES = 360 * 5; // æœ€ä½å›è»¢æ•°ï¼ˆåº¦ï¼‰
            const NUM_OPTIONS = 8; // ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã®é¸æŠè‚¢ã®æ•°
            const SEGMENT_ANGLE = 360 / NUM_OPTIONS; // 1ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚ãŸã‚Šã®è§’åº¦
            const TESTIMONIAL_SLIDE_DURATION = 500; // ms
            const ACCORDION_ANIMATION_DURATION = 400; // ms
            const DEFAULT_WEIGHT = 1; // ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®é‡ã¿
            const ADMIN_PANEL_STORAGE_KEY = 'rouletteWeights'; // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®ã‚­ãƒ¼
            const INTERSECTION_OBSERVER_OPTIONS = {
                root: null, // ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆã‚’åŸºæº–ã«ã™ã‚‹
                rootMargin: '0px',
                threshold: 0.1 // 10%è¡¨ç¤ºã•ã‚ŒãŸã‚‰ãƒˆãƒªã‚¬ãƒ¼
            };

            // --- DOMè¦ç´ ã®å–å¾— ---
            const themeToggle = document.getElementById('theme-toggle');
            const spinButton = document.getElementById('spin-button');
            const rouletteWheel = document.getElementById('roulette-wheel');
            const resultElement = document.getElementById('result');
            const imageOptionsContainer = document.getElementById('image-options');
            const imageOptionButtons = Array.from(imageOptionsContainer.querySelectorAll('.image-option'));
            const prevTestimonialBtn = document.getElementById('prev-testimonial');
            const nextTestimonialBtn = document.getElementById('next-testimonial');
            const testimonialContainer = document.getElementById('testimonial-container');
            const faqAccordion = document.getElementById('faq-accordion'); // ã‚¤ãƒ™ãƒ³ãƒˆå§”ä»»ã§ä½¿ç”¨
            const adminPanelToggleLink = document.getElementById('admin-panel-toggle-link');
            const adminPanel = document.getElementById('admin-panel');
            const weightControlsContainer = document.getElementById('weight-controls');
            const saveWeightsBtn = document.getElementById('save-weights'); // ã‚¤ãƒ™ãƒ³ãƒˆå§”ä»»ã§ä½¿ç”¨
            const resetWeightsBtn = document.getElementById('reset-weights'); // ã‚¤ãƒ™ãƒ³ãƒˆå§”ä»»ã§ä½¿ç”¨

            // --- çŠ¶æ…‹å¤‰æ•° ---
            let selectedOptionIndex = null; // é¸æŠã•ã‚ŒãŸçµµæŸ„ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ (0-7)
            let isSpinning = false; // ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆãŒå›è»¢ä¸­ã‹ã©ã†ã‹ã®ãƒ•ãƒ©ã‚°
            let currentTestimonial = 0; // ç¾åœ¨è¡¨ç¤ºä¸­ã®ãƒ†ã‚¹ãƒ†ã‚£ãƒ¢ãƒ‹ã‚¢ãƒ«ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
            let isSliding = false; // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ãŒã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä¸­ã‹
            let currentRotation = 0; // ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã®ç¾åœ¨ã®è§’åº¦ã‚’ä¿æŒ

            // --- ãƒ‡ãƒ¼ã‚¿å®šç¾© ---
            const options = ['ğŸ’', 'ğŸ‹', 'ğŸŠ', 'ğŸ‡', 'ğŸ', 'ğŸ‰', 'ğŸ’', 'ğŸŒŸ'];

            // --- ç¢ºç‡é‡ã¿ã‚·ã‚¹ãƒ†ãƒ  ---
            // !! ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è­¦å‘Š: ã“ã®é‡ã¿ã¨æŠ½é¸ãƒ­ã‚¸ãƒƒã‚¯ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã«ã‚ã‚Šã¾ã™ã€‚ !!
            // !! ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚ˆã‚‹æ“ä½œãŒå¯èƒ½ã§ã™ã€‚å…¬æ­£ãªæŠ½é¸ã«ã¯ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰å®Ÿè£…ãŒå¿…é ˆã§ã™ã€‚ !!
            let optionWeights = options.map(() => DEFAULT_WEIGHT); // å„ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®é‡ã¿é…åˆ—
            let totalWeight = optionWeights.reduce((sum, weight) => sum + weight, 0); // é‡ã¿ã®åˆè¨ˆ

            // --- åˆæœŸåŒ–å‡¦ç† ---
            function initialize() {
                // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ãƒ­ã‚¸ãƒƒã‚¯ã®ãƒªã‚¹ã‚¯ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è­¦å‘Š
                console.warn(
                    "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è­¦å‘Š: ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã®æŠ½é¸ãƒ­ã‚¸ãƒƒã‚¯ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã§å®Ÿè¡Œã•ã‚Œã¦ã„ã¾ã™ã€‚" +
                    "ã“ã‚Œã¯ãƒ‡ãƒ¢ç›®çš„ã§ã‚ã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚ˆã‚‹æ“ä½œãŒå¯èƒ½ã§ã™ã€‚" +
                    "å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€å¿…ãšã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§æŠ½é¸ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚"
                );

                loadWeightsFromStorage(); // ä¿å­˜ã•ã‚ŒãŸé‡ã¿ã‚’èª­ã¿è¾¼ã¿ (Adminãƒ‘ãƒãƒ«åˆæœŸåŒ–ã‚ˆã‚Šå…ˆã«)
                setupEventListeners();
                setupRouletteLabels();
                updateTestimonialSlider(true); // åˆæœŸè¡¨ç¤ºï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãªã—ï¼‰
                checkInitialTheme();
                setupIntersectionObserver(); // Intersection Observerã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
                initializeAdminPanel(); // Adminãƒ‘ãƒãƒ«ã®åˆæœŸåŒ–
                spinButton.disabled = true; // åˆæœŸçŠ¶æ…‹ã§ã¯ã‚¹ãƒ”ãƒ³ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
                updateAriaChecked(null); // åˆæœŸçŠ¶æ…‹ã®aria-checkedã‚’è¨­å®š
                currentRotation = getCurrentRotation(rouletteWheel);
                rouletteWheel.style.transform = `rotate(${currentRotation}deg)`; // JSã§ç®¡ç†
            }

            // --- ã‚»ã‚­ãƒ¥ã‚¢ãªä¹±æ•°ç”Ÿæˆ ---
            function getSecureRandomNumber(min, max) {
                const range = max - min;
                if (range <= 0) {
                    console.error("Invalid range for random number generation.");
                    return min;
                }

                if (window.crypto && window.crypto.getRandomValues) {
                    try {
                        const randomBuffer = new Uint32Array(1);
                        let randomNumber;
                        do {
                            window.crypto.getRandomValues(randomBuffer);
                            const maxAllowed = Math.floor((0xFFFFFFFF + 1) / range) * range;
                            if (randomBuffer[0] < maxAllowed) {
                                randomNumber = min + (randomBuffer[0] % range);
                                break;
                            }
                        } while (true);
                        return randomNumber;
                    } catch (error) {
                        console.error("Crypto API random number generation failed:", error);
                        throw new Error("Secure random number generation failed. Cannot proceed.");
                        // return fallbackRandom(min, max); // ä»¥å‰ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
                    }
                } else {
                    console.error("Crypto API not available. Cannot generate secure random numbers.");
                    throw new Error("Crypto API not available. Cannot proceed.");
                }

            // --- é‡ã¿ä»˜ãç¢ºç‡è¨ˆç®— ---
            function updateOptionWeight(index, weight) {
                if (index >= 0 && index < optionWeights.length && typeof weight === 'number' && weight >= 0) {
                    optionWeights[index] = weight;
                    totalWeight = optionWeights.reduce((sum, currentWeight) => sum + currentWeight, 0);
                } else {
                    console.error(`Invalid weight update: index=${index}, weight=${weight}`);
                }
            }

            function getWeightedRandomIndex() {
                // !! å†åº¦è­¦å‘Š: ã“ã®é–¢æ•°ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã§å®Ÿè¡Œã•ã‚Œã€æ“ä½œå¯èƒ½ã§ã™ !!
                if (totalWeight <= 0) {
                    console.warn("Total weight is zero or negative. Using unweighted random index (INSECURE if crypto fails).");
                    // é‡ã¿ãŒãªã„å ´åˆã‚‚ getSecureRandomNumber ã‚’ä½¿ã†
                    try {
                        return getSecureRandomNumber(0, NUM_OPTIONS);
                    } catch (error) {
                        console.error("Cannot get weighted index due to error in secure random number generation:", error);
                        // ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã®ä»£æ›¿å‡¦ç† (ä¾‹: æœ€åˆã®è¦ç´ ã‚’è¿”ã™ã€ã‚²ãƒ¼ãƒ ã‚’åœæ­¢ã™ã‚‹ãªã©)
                        alert("ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸãŸã‚ã€ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚’å®Ÿè¡Œã§ãã¾ã›ã‚“ã€‚");
                        return -1; // ã‚¨ãƒ©ãƒ¼ã‚’ç¤ºã™å€¤
                    }
                }

                try {
                    // ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã—ã¦ç²¾åº¦ã‚’å¤šå°‘å‘ä¸Šã•ã›ã‚‹ (ä¾‹: 0ã‹ã‚‰ totalWeight * 1000 ã¾ã§)
                    const scaledTotalWeight = Math.floor(totalWeight * 1000);
                    if (scaledTotalWeight <= 0) { // ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°å¾Œã‚‚0ãªã‚‰å‡ç­‰ç¢ºç‡
                        return getSecureRandomNumber(0, NUM_OPTIONS);
                    }
                    const randomValueScaled = getSecureRandomNumber(0, scaledTotalWeight);
                    const randomValue = randomValueScaled / 1000.0;

                    let weightSum = 0;
                    for (let i = 0; i < optionWeights.length; i++) {
                        weightSum += optionWeights[i];
                        if (randomValue < weightSum) {
                            return i;
                        }
                    }
                    // æµ®å‹•å°æ•°ç‚¹èª¤å·®ãªã©ã¸ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ (æœ€å¾Œã®è¦ç´ ã‚’è¿”ã™)
                    console.warn("Weighted random index calculation reached fallback (likely floating point issue).");
                    return optionWeights.length - 1;

                } catch (error) {
                    console.error("Cannot get weighted index due to error in secure random number generation:", error);
                    alert("ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸãŸã‚ã€ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚’å®Ÿè¡Œã§ãã¾ã›ã‚“ã€‚");
                    return -1; // ã‚¨ãƒ©ãƒ¼ã‚’ç¤ºã™å€¤
                }
            }

            // --- ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š (ã‚¤ãƒ™ãƒ³ãƒˆå§”ä»»ã‚’æ´»ç”¨) ---
            function setupEventListeners() {
                document.addEventListener('click', handleDocumentClick);
                weightControlsContainer.addEventListener('input', handleWeightInputChange);
                // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒªã‚µã‚¤ã‚ºæ™‚ã®å‡¦ç† (å¿…è¦ãªã‚‰è¿½åŠ )
                // window.addEventListener('resize', handleResize);
            }

            // Documentå…¨ä½“ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©
            function handleDocumentClick(event) {
                const target = event.target;

                // ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³
                if (target.closest('#theme-toggle')) {
                    toggleTheme();
                    return;
                }

                // ç”»åƒé¸æŠãƒœã‚¿ãƒ³ (imageOptionsContainerå†…ã§ç™ºç”Ÿã—ãŸã‚¯ãƒªãƒƒã‚¯ã‚’å‡¦ç†)
                const imageOptionBtn = target.closest('.image-option');
                if (imageOptionsContainer.contains(imageOptionBtn)) {
                    handleImageOptionClick(imageOptionBtn);
                    return;
                }

                // ã‚¹ãƒ”ãƒ³ãƒœã‚¿ãƒ³
                if (target === spinButton) {
                    spinRoulette();
                    return;
                }

                // ãƒ†ã‚¹ãƒ†ã‚£ãƒ¢ãƒ‹ã‚¢ãƒ« å‰ã¸/æ¬¡ã¸ ãƒœã‚¿ãƒ³
                if (target === prevTestimonialBtn) {
                    showPrevTestimonial();
                    return;
                }
                if (target === nextTestimonialBtn) {
                    showNextTestimonial();
                    return;
                }

                // FAQ ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ãƒ˜ãƒƒãƒ€ãƒ¼ (faqAccordionå†…ã§ç™ºç”Ÿã—ãŸã‚¯ãƒªãƒƒã‚¯ã‚’å‡¦ç†)
                const faqHeader = target.closest('.accordion-header');
                if (faqAccordion.contains(faqHeader)) {
                    handleFaqClick(faqHeader);
                    return;
                }

                // Adminãƒ‘ãƒãƒ«è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆãƒªãƒ³ã‚¯
                if (target === adminPanelToggleLink) {
                    event.preventDefault(); // <a>ã‚¿ã‚°ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‹•ä½œã‚­ãƒ£ãƒ³ã‚»ãƒ«
                    toggleAdminPanel();
                    return;
                }

                // Adminãƒ‘ãƒãƒ« ä¿å­˜/ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ (adminPanelå†…ã§ç™ºç”Ÿã—ãŸã‚¯ãƒªãƒƒã‚¯ã‚’å‡¦ç†)
                if (adminPanel.contains(target)) {
                    if (target === saveWeightsBtn) {
                        saveWeightsToStorage();
                        // ã‚ˆã‚Šç›®ç«‹ãŸãªã„é€šçŸ¥æ–¹æ³• (ä¾‹: ãƒœã‚¿ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä¸€æ™‚å¤‰æ›´)
                        target.textContent = 'ä¿å­˜ã—ã¾ã—ãŸ!';
                        target.disabled = true;
                        setTimeout(() => {
                            target.textContent = 'è¨­å®šã‚’ä¿å­˜';
                            target.disabled = false;
                        }, 1500);
                        return;
                    }
                    if (target === resetWeightsBtn) {
                        resetWeights();
                        return;
                    }
                }
            }

            // --- ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆé–¢é€£ ---
            function setupRouletteLabels() {
                const fragment = document.createDocumentFragment();
                const wheelSize = rouletteWheel.offsetWidth;
                const radius = wheelSize * 0.35;
                const degToRad = Math.PI / 180;

                for (let i = 0; i < options.length; i++) {
                    const angle = (SEGMENT_ANGLE * i) + (SEGMENT_ANGLE / 2);
                    const angleRad = (angle - 90) * degToRad;
                    const label = document.createElement('div');
                    label.classList.add('segment-label');
                    label.textContent = options[i];
                    const x = radius * Math.cos(angleRad);
                    const y = radius * Math.sin(angleRad);
                    label.style.transform = `translate(${x}px, ${y}px) translate(-50%, -50%) rotate(${angle + 90}deg)`;
                    fragment.appendChild(label);
                }
                rouletteWheel.appendChild(fragment);
            }

            function updateAriaChecked(selectedIndex) {
                imageOptionButtons.forEach((btn, index) => {
                    const isSelected = index === selectedIndex;
                    btn.setAttribute('aria-checked', String(isSelected)); // "true" or "false"
                    btn.classList.toggle('selected', isSelected);
                });
            }

            function handleImageOptionClick(clickedButton) {
                if (isSpinning) return;

                const clickedIndex = parseInt(clickedButton.dataset.value, 10);
                if (isNaN(clickedIndex) || clickedIndex < 0 || clickedIndex >= NUM_OPTIONS) {
                    console.error('Invalid option index:', clickedButton.dataset.value);
                    return;
                }
                // é¸æŠè§£é™¤ã‚’è¨±å¯ã—ãªã„å ´åˆ (å¸¸ã«ã©ã‚Œã‹é¸æŠã•ã‚Œã¦ã„ã‚‹çŠ¶æ…‹)
                // if (selectedOptionIndex === clickedIndex) return;

                // åŒã˜ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§é¸æŠè§£é™¤ã™ã‚‹å ´åˆ
                if (selectedOptionIndex === clickedIndex) {
                    selectedOptionIndex = null;
                    updateAriaChecked(null);
                    spinButton.disabled = true;
                } else {
                    selectedOptionIndex = clickedIndex;
                    updateAriaChecked(selectedOptionIndex);
                    spinButton.disabled = false;
                }
                resultElement.classList.remove('show'); 
            }


            function spinRoulette() {
                if (isSpinning || selectedOptionIndex === null) {
                    return;
                }

                isSpinning = true;
                spinButton.disabled = true;
                resultElement.classList.remove('show');
                imageOptionButtons.forEach(btn => btn.disabled = true); // é¸æŠè‚¢ã‚‚ç„¡åŠ¹åŒ–

                let winningIndex;
                try {
                    // æŠ½é¸å®Ÿè¡Œ (ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰)
                    winningIndex = getWeightedRandomIndex();
                    if (winningIndex === -1) { // getWeightedRandomIndex ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆ
                        throw new Error("Failed to determine winning index.");
                    }
                } catch (error) {
                    console.error("Spin roulette failed:", error);
                    alert(`ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã®å®Ÿè¡Œã«å¤±æ•—ã—ã¾ã—ãŸ: ${error.message}`);
                    // çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ
                    isSpinning = false;
                    spinButton.disabled = selectedOptionIndex === null; // é¸æŠã•ã‚Œã¦ã„ã‚Œã°æœ‰åŠ¹ã«æˆ»ã™
                    imageOptionButtons.forEach(btn => btn.disabled = false);
                    return; // å‡¦ç†ä¸­æ–­
                }
                const targetSegmentCenter = winningIndex * SEGMENT_ANGLE + SEGMENT_ANGLE / 2;
                let targetAngle = 360 - targetSegmentCenter;
                const randomOffsetRange = SEGMENT_ANGLE * 0.45; // Â±45%
                try {
                    // ã‚ªãƒ•ã‚»ãƒƒãƒˆè¨ˆç®—ã«ã‚‚å®‰å…¨ãªä¹±æ•°ã‚’ä½¿ç”¨
                    const randomOffset = (getSecureRandomNumber(0, Math.floor(randomOffsetRange * 2 * 1000)) / 1000) - randomOffsetRange;
                    targetAngle += randomOffset;
                } catch (error) {
                    // ã‚ªãƒ•ã‚»ãƒƒãƒˆè¨ˆç®—å¤±æ•—æ™‚ã¯ã‚ªãƒ•ã‚»ãƒƒãƒˆãªã—ã§ç¶šè¡Œ
                    console.warn("Failed to get random offset, continuing without it.", error);
                }


                const normalizedCurrentRotation = normalizeAngle(currentRotation);
                const finalAngle = BASE_ROTATION_DEGREES + targetAngle;
                const startTime = performance.now();
                const duration = SPIN_DURATION_SECONDS * 1000;
                const startAngle = currentRotation;
                const angleChange = finalAngle - startAngle;

                function animate(currentTime) {
                    const elapsed = currentTime - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    const easedProgress = easeOutQuart(progress);
                    const currentAngle = startAngle + (angleChange * easedProgress);

                    rouletteWheel.style.transform = `rotate(${currentAngle}deg)`;

                    if (progress < 1) {
                        requestAnimationFrame(animate);
                    } else {
                        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†
                        rouletteWheel.style.transform = `rotate(${finalAngle}deg)`;
                        currentRotation = finalAngle;
                        displayResult(winningIndex);
                        isSpinning = false;
                        imageOptionButtons.forEach(btn => btn.disabled = false);
                        // ã‚¹ãƒ”ãƒ³ãƒœã‚¿ãƒ³ã¯é¸æŠçŠ¶æ…‹ã«å¿œã˜ã¦å†è¨­å®š
                        spinButton.disabled = selectedOptionIndex === null;
                    }
                }
                requestAnimationFrame(animate);
            }

            // Helper functions for spinRoulette
            function getCurrentRotation(element) {
                const style = window.getComputedStyle(element);
                const transform = style.transform;
                if (transform && transform !== 'none') {
                    const matrixMatch = transform.match(/^matrix\((.+)\)$/);
                    if (matrixMatch) {
                        const values = matrixMatch[1].split(', ').map(parseFloat);
                        let angle = Math.round(Math.atan2(values[1], values[0]) * (180 / Math.PI));
                        return angle < 0 ? angle + 360 : angle;
                    }
                    const rotateMatch = transform.match(/^rotate\((.+)deg\)$/);
                    if (rotateMatch) {
                        return parseFloat(rotateMatch[1]);
                    }
                }
                return 0;
            }

            function normalizeAngle(angle) {
                return ((angle % 360) + 360) % 360;
            }

            function easeOutQuart(t) { // easeOutCubic ã‹ã‚‰ Quart ã«å¤‰æ›´ (ã‚ˆã‚Šã‚¹ãƒ ãƒ¼ã‚º)
                t--;
                return -(t * t * t * t - 1);
            }

            function displayResult(winningIndex) {
                const winningSymbol = options[winningIndex];
                const selectedSymbol = selectedOptionIndex !== null ? options[selectedOptionIndex] : 'ãªã—'; // æœªé¸æŠã®å ´åˆ
                const win = winningIndex === selectedOptionIndex;

                // çµæœè¡¨ç¤ºè¦ç´ ã‚’ã‚¯ãƒªã‚¢ (innerHTMLã®ä»£ã‚ã‚Šã«textContentã‚’ä½¿ç”¨)
                resultElement.textContent = ''; // å­è¦ç´ ã‚’å…¨ã¦å‰Šé™¤

                // h3 è¦ç´ ã‚’ä½œæˆã—ã¦è¿½åŠ 
                const heading = document.createElement('h3');
                heading.textContent = `çµæœ: ${winningSymbol}`;
                resultElement.appendChild(heading);

                // p è¦ç´  (çµæœãƒ¡ãƒƒã‚»ãƒ¼ã‚¸) ã‚’ä½œæˆã—ã¦è¿½åŠ 
                const resultMessage = document.createElement('p');
                resultMessage.classList.add(win ? 'win' : 'lose');
                if (selectedOptionIndex !== null) {
                    resultMessage.textContent = win
                        ? `ğŸ‰ ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼ã€Œ${selectedSymbol}ã€ãŒå½“ãŸã‚Šã¾ã—ãŸï¼`
                        : `æ®‹å¿µã€ã€Œ${selectedSymbol}ã€ã¯ã¯ãšã‚Œã§ã™ã€‚çµæœã¯ã€Œ${winningSymbol}ã€ã§ã—ãŸã€‚`;
                } else {
                    resultMessage.textContent = `çµæœã¯ã€Œ${winningSymbol}ã€ã§ã—ãŸã€‚`; // çµµæŸ„æœªé¸æŠã®å ´åˆ
                }
                resultElement.appendChild(resultMessage);

                // p è¦ç´  (æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³) ã‚’ä½œæˆã—ã¦è¿½åŠ 
                const nextActionMessage = document.createElement('p');
                if (selectedOptionIndex !== null) {
                    nextActionMessage.textContent = win
                        ? 'ç´ æ™´ã‚‰ã—ã„é‹ã§ã™ã­ï¼ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã—ã¾ã™ã‹ï¼Ÿ'
                        : 'ã‚‚ã†ä¸€åº¦å¥½ããªçµµæŸ„ã‚’é¸ã‚“ã§æŒ‘æˆ¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼';
                } else {
                    nextActionMessage.textContent = 'å¥½ããªçµµæŸ„ã‚’é¸ã‚“ã§æŒ‘æˆ¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼';
                }
                resultElement.appendChild(nextActionMessage);

                // çµæœã‚’è¡¨ç¤º (ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³)
                resultElement.classList.add('show');

                // æ¬¡ã®ã‚¹ãƒ”ãƒ³ã«å‚™ãˆã‚‹ (çŠ¶æ…‹ãƒªã‚»ãƒƒãƒˆ)
                selectedOptionIndex = null;
                updateAriaChecked(null); // é¸æŠçŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ
                // ã‚¹ãƒ”ãƒ³ãƒœã‚¿ãƒ³ã¯é¸æŠã•ã‚Œã¦ã„ãªã„ã®ã§ç„¡åŠ¹ã®ã¾ã¾
                spinButton.disabled = true;
            }


            // --- ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆ ---
            function toggleTheme() {
                const isDarkMode = document.body.classList.toggle('dark-mode');
                themeToggle.textContent = isDarkMode ? 'â˜€ï¸' : 'ğŸŒ™';
                themeToggle.setAttribute('aria-label', isDarkMode ? 'ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ' : 'ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ');
                try {
                    localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
                } catch (error) {
                    console.warn("Failed to save theme to localStorage:", error);
                }
            }

            function checkInitialTheme() {
                let initialTheme = 'light'; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
                try {
                    const savedTheme = localStorage.getItem('theme');
                    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
                    initialTheme = savedTheme || (prefersDark ? 'dark' : 'light');
                } catch (error) {
                    console.warn("Failed to access localStorage or matchMedia:", error);
                    // localStorageã‚¢ã‚¯ã‚»ã‚¹ä¸å¯ã§ã‚‚å‹•ä½œç¶™ç¶š
                }

                if (initialTheme === 'dark') {
                    document.body.classList.add('dark-mode');
                    themeToggle.textContent = 'â˜€ï¸';
                    themeToggle.setAttribute('aria-label', 'ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ');
                } else {
                    document.body.classList.remove('dark-mode');
                    themeToggle.textContent = 'ğŸŒ™';
                    themeToggle.setAttribute('aria-label', 'ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ');
                }
            }

            // --- ãƒ†ã‚¹ãƒ†ã‚£ãƒ¢ãƒ‹ã‚¢ãƒ«ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ ---
            const testimonials = testimonialContainer.querySelectorAll('.testimonial');
            const testimonialCount = testimonials.length;

            function showNextTestimonial() {
                if (isSliding || testimonialCount <= 1) return;
                isSliding = true;
                currentTestimonial = (currentTestimonial + 1) % testimonialCount;
                updateTestimonialSlider();
                setTimeout(() => { isSliding = false; }, TESTIMONIAL_SLIDE_DURATION);
            }

            function showPrevTestimonial() {
                if (isSliding || testimonialCount <= 1) return;
                isSliding = true;
                currentTestimonial = (currentTestimonial - 1 + testimonialCount) % testimonialCount;
                updateTestimonialSlider();
                setTimeout(() => { isSliding = false; }, TESTIMONIAL_SLIDE_DURATION);
            }

            function updateTestimonialSlider(isInitial = false) {
                const containerWidth = testimonialContainer.offsetWidth;
                const offset = -currentTestimonial * containerWidth;
                testimonialContainer.style.transition = isInitial ? 'none' : `transform ${TESTIMONIAL_SLIDE_DURATION}ms ease`;
                testimonialContainer.style.transform = `translate3d(${offset}px, 0, 0)`;
                prevTestimonialBtn.disabled = currentTestimonial === 0;
                nextTestimonialBtn.disabled = currentTestimonial === testimonialCount - 1;
            }


            // --- FAQã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ ---
            function handleFaqClick(header) {
                const item = header.parentElement;
                const content = header.nextElementSibling;
                const icon = header.querySelector('.accordion-icon');
                const isOpening = !item.classList.contains('active');

                item.classList.toggle('active');
                header.setAttribute('aria-expanded', String(isOpening));
                icon.textContent = isOpening ? 'âˆ’' : '+';

                if (isOpening) {
                    openAccordionContent(content);
                } else {
                    closeAccordionContent(content);
                }
            }

            function openAccordionContent(content) {
                // æ—¢å­˜ã®å®Ÿè£…ã¯å•é¡Œãªã„ãŸã‚å¤‰æ›´ãªã—
                const contentInner = content.querySelector('.accordion-content-inner');
                content.style.visibility = 'hidden';
                content.style.maxHeight = 'none';
                content.style.padding = '0 1.5rem';
                const height = contentInner.offsetHeight +
                    parseFloat(getComputedStyle(contentInner).paddingTop) +
                    parseFloat(getComputedStyle(contentInner).paddingBottom);
                content.style.maxHeight = '0px';
                content.style.visibility = 'visible';
                requestAnimationFrame(() => {
                    content.style.maxHeight = `${height}px`;
                    contentInner.style.padding = '1.5rem 0';
                });
                setTimeout(() => {
                    if (content.parentElement.classList.contains('active')) {
                        content.style.maxHeight = 'none';
                    }
                }, ACCORDION_ANIMATION_DURATION);
            }

            function closeAccordionContent(content) {
                const contentInner = content.querySelector('.accordion-content-inner');
                const height = content.scrollHeight;
                content.style.maxHeight = `${height}px`;
                contentInner.style.padding = '1.5rem 0';
                requestAnimationFrame(() => {
                    content.style.maxHeight = '0px';
                    contentInner.style.padding = '0';
                });
                setTimeout(() => {
                    if (!content.parentElement.classList.contains('active')) {
                        content.style.visibility = 'hidden';
                        content.style.padding = '0 1.5rem';
                    }
                }, ACCORDION_ANIMATION_DURATION);
            }

            // --- Admin Panel ---
            function toggleAdminPanel() {
                const isHidden = adminPanel.classList.toggle('hidden');
                adminPanelToggleLink.setAttribute('aria-expanded', String(!isHidden));
                if (!isHidden) {
                    const firstInput = adminPanel.querySelector('input[type="number"], button');
                    firstInput?.focus();
                }
            }

            function initializeAdminPanel() {
                weightControlsContainer.textContent = '';
                const fragment = document.createDocumentFragment();
                options.forEach((option, index) => {
                    const controlDiv = document.createElement('div');
                    controlDiv.classList.add('weight-control');
                    const label = document.createElement('label');
                    const inputId = `weight-${index}`;
                    label.htmlFor = inputId;
                    label.textContent = `${option} ã®ç¢ºç‡é‡ã¿: `;
                    const input = document.createElement('input');
                    input.type = 'number';
                    input.id = inputId;
                    input.min = '0';
                    input.step = '0.1';
                    input.value = optionWeights[index].toFixed(1);
                    input.dataset.index = index;
                    const probabilitySpan = document.createElement('span');
                    probabilitySpan.classList.add('probability');
                    label.appendChild(input);
                    controlDiv.appendChild(label);
                    controlDiv.appendChild(probabilitySpan);
                    fragment.appendChild(controlDiv);
                });
                weightControlsContainer.appendChild(fragment);
                updateProbabilityDisplays();
            }

            function handleWeightInputChange(event) {
                const input = event.target;
                if (input.type === 'number' && input.dataset.index != null) {
                    const index = parseInt(input.dataset.index, 10);
                    let newWeight = parseFloat(input.value);

                    // å…¥åŠ›ãŒç©ºã‹ãƒã‚§ãƒƒã‚¯ã—ã€ç©ºãªã‚‰0ã¨ã—ã¦æ‰±ã†
                    if (input.value === '') {
                        newWeight = 0;
                    }

                    if (!isNaN(newWeight) && newWeight >= 0) {
                        updateOptionWeight(index, newWeight);
                        updateProbabilityDisplays();
                    } else if (isNaN(newWeight)) {
                        // ä¸æ­£ãªæ•°å€¤å…¥åŠ› (ä¾‹: "abc") ã®å ´åˆã¯å…ƒã®å€¤ã«æˆ»ã™
                        console.warn(`Invalid weight input: ${input.value}`);
                        input.value = optionWeights[index].toFixed(1);
                    }
                    // newWeight < 0 ã¯ input[min=0] ã§ãƒ–ãƒ©ã‚¦ã‚¶ãŒé˜²ããŒã€å¿µã®ãŸã‚ else if ã‚’è¿½åŠ ã—ã¦ã‚‚è‰¯ã„
                }
            }

            function updateProbabilityDisplays() {
                totalWeight = optionWeights.reduce((sum, weight) => sum + weight, 0);
                options.forEach((_, index) => {
                    const probabilitySpan = weightControlsContainer.querySelector(`#weight-${index}`)?.closest('.weight-control')?.querySelector('.probability');
                    if (probabilitySpan) {
                        probabilitySpan.textContent = `ç´„ ${calculateProbability(index)}%`;
                    }
                });
            }

            function calculateProbability(index) {
                if (totalWeight <= 0 || optionWeights[index] <= 0) return '0.0';
                return ((optionWeights[index] / totalWeight) * 100).toFixed(1);
            }

            function saveWeightsToStorage() {
                try {
                    const validWeights = optionWeights.map(w => (typeof w === 'number' && w >= 0) ? w : DEFAULT_WEIGHT);
                    localStorage.setItem(ADMIN_PANEL_STORAGE_KEY, JSON.stringify(validWeights));
                } catch (error) {
                    console.error("Failed to save weights to localStorage:", error);
                    alert('è¨­å®šã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚localStorageãŒåˆ©ç”¨ã§ããªã„ã‹ã€å®¹é‡åˆ¶é™ã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚');
                }
            }

            function loadWeightsFromStorage() {
                try {
                    const savedWeights = localStorage.getItem(ADMIN_PANEL_STORAGE_KEY);
                    if (savedWeights) {
                        const parsedWeights = JSON.parse(savedWeights);
                        if (Array.isArray(parsedWeights) &&
                            parsedWeights.length === options.length &&
                            parsedWeights.every(w => typeof w === 'number' && w >= 0)) {
                            optionWeights = parsedWeights;
                        } else {
                            console.warn("Invalid weight data in localStorage. Using defaults.");
                            resetWeightsInternal();
                            localStorage.removeItem(ADMIN_PANEL_STORAGE_KEY);
                        }
                    } else {
                        // ä¿å­˜ãƒ‡ãƒ¼ã‚¿ãŒãªã„å ´åˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ä½¿ã†ï¼ˆä½•ã‚‚ã—ãªã„ or resetWeightsInternal() ã‚’å‘¼ã‚“ã§ã‚‚è‰¯ã„ï¼‰
                        // resetWeightsInternal(); // åˆå›ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ç¢ºå®Ÿã«ä½¿ã†å ´åˆ
                    }
                } catch (error) {
                    console.error("Failed to load or parse weights from localStorage:", error);
                    resetWeightsInternal();
                    // ä¸æ­£ãªãƒ‡ãƒ¼ã‚¿ãŒåŸå› ã‹ã‚‚ã—ã‚Œãªã„ã®ã§å‰Šé™¤ã‚’è©¦ã¿ã‚‹
                    try {
                        localStorage.removeItem(ADMIN_PANEL_STORAGE_KEY);
                    } catch (removeError) {
                        console.error("Failed to remove corrupted data from localStorage:", removeError);
                    }
                }
                totalWeight = optionWeights.reduce((sum, weight) => sum + weight, 0);
            }


            function resetWeightsInternal() {
                optionWeights = options.map(() => DEFAULT_WEIGHT);
                totalWeight = optionWeights.reduce((sum, weight) => sum + weight, 0);
            }

            function resetWeights() {
                if (confirm('ç¢ºç‡è¨­å®šã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ï¼ˆå…¨ã¦å‡ç­‰ï¼‰ã«æˆ»ã—ã¾ã™ã‹ï¼Ÿä¿å­˜ã•ã‚Œã¦ã„ã‚‹è¨­å®šã¯å‰Šé™¤ã•ã‚Œã¾ã™ã€‚')) {
                    resetWeightsInternal();
                    options.forEach((_, index) => {
                        const input = document.getElementById(`weight-${index}`);
                        if (input) input.value = DEFAULT_WEIGHT.toFixed(1);
                    });
                    updateProbabilityDisplays();
                    try {
                        localStorage.removeItem(ADMIN_PANEL_STORAGE_KEY);
                        alert('è¨­å®šãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«ãƒªã‚»ãƒƒãƒˆã•ã‚Œã¾ã—ãŸã€‚');
                    } catch (error) {
                        console.error("Failed to remove weights from localStorage during reset:", error);
                        alert('è¨­å®šã®ãƒªã‚»ãƒƒãƒˆä¸­ã«ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
                    }
                }
            }

            // --- Intersection Observer ---
            function setupIntersectionObserver() {
                const observerCallback = (entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible');
                            observer.unobserve(entry.target);
                        }
                    });
                };
                const observer = new IntersectionObserver(observerCallback, INTERSECTION_OBSERVER_OPTIONS);
                const targets = document.querySelectorAll('.target');
                targets.forEach(target => observer.observe(target));
            }

            // --- åˆæœŸåŒ–å®Ÿè¡Œ ---
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initialize);
            } else {
                initialize();
            }

        })(); // IIFE çµ‚äº†
    </script>
</body>

</html>